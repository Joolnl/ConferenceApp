<nav class="navbar navbar-expand-md navbar-dark bg-dark">
  <a class="navbar-brand" (click)="isMobile && closeNav()" [routerLink]="'/'">ConferenceApp</a>

  <button (click)="toggleNav()" class="navbar-toggler collapsed" type="button" data-toggle="collapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse hide-startup" [@toggleNav]="showNav" [style.height]="showNav === 'in' ? '0px' : '*'">
    <ul class="navbar-nav">
      <li class="nav-item search">
        <form [formGroup]="searchForm" class="search-form">
          <input type="text" class="form-control search-input" formControlName="search"
            [placeholder]="'general.menu.search' | translate" />
          <ng-container *ngIf="searchResults$ | async as searchResults">
            <div *ngIf="showSearchResults && search.value" class="search-results">
              <ng-container *ngIf="searchResults[0].hits.length > 0 || searchResults[1].hits.length > 0; else noResults">
                <ng-container *ngFor="let searchResult of searchResults">
                  <ng-container *ngIf="searchResult.hits.length">
                    <h4 class="text-primary">{{ searchResult.title }}</h4>
                    <ul>
                      <li *ngFor="let hit of searchResult.hits" class="search-result"
                        [routerLink]="[searchResult.prefix, hit.basename]"
                        (click)="showSearchResults = false; searchForm.reset()">
                        {{ hit.title }}
                      </li>
                    </ul>
                  </ng-container>
                </ng-container>
              </ng-container>
            </div>
          </ng-container>
        </form>
      </li>
      <li class="nav-item"><a class="nav-link" (click)="isMobile && closeNav()" [routerLink]="['/posts']">Posts</a></li>
      <li class="nav-item"><a class="nav-link" (click)="isMobile && closeNav()" [routerLink]="['/conferences']">Conferences</a></li>
    </ul>
  </div>

</nav>

<div class="container content">
  <router-outlet></router-outlet>
</div>

<ng-template #noResults>
  <span class="no-results">{{ 'general.search.no_result' | translate }}</span>
</ng-template>